\ProvidesPackage{code}[2019/11/04]
\usepackage{listings}
\usepackage{xcolor}


\newcommand{\code}[1]{\colorbox{lightlightgray}{\lstinline[
    language=C++, %C++ gives us true and false
    showstringspaces=false,
    basicstyle=\ttfamily,
    columns=flexible,
    keywordstyle=\color{blue},
    commentstyle=\color{gray},
]$#1$}}
\definecolor{lightlightgray}{RGB}{230,230,230}
\lstnewenvironment{codeblock}[1][]
    {
        \minipage{\textwidth}   
        \lstset{
            language=C++,
            backgroundcolor=\color{lightlightgray},
            showstringspaces=false,
            breaklines=true,
            breakatwhitespace=false,
            basicstyle=\ttfamily,
            columns=fixed,
            keywordstyle=\color{blue},
            commentstyle=\color{gray},
            breaklines=false,
            captionpos=b,
            extendedchars=true,
            numbers=left,
            numberstyle=\small\color{gray},
            #1
        }
        \lstset{}
         \csname\@lst @SetFirstNumber\endcsname
    }
    {
        \csname\@lst @SaveFirstNumber\endcsname
        \endminipage
    }
